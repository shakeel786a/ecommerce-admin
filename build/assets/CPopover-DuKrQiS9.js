import{a as o,_ as L,R as t,c as A,P as e,d as B,n as I}from"./index-DRiiqUs1.js";import{u as V,t as $,v as z}from"./DefaultLayout-4wUdWsYR.js";import{g as D,e as G}from"./getRTLPlacement-DuoHhmV3.js";const O=o.forwardRef((m,w)=>{var{children:E,animation:R=!0,className:T,container:C,content:k,delay:i=0,fallbackPlacements:j=["top","right","bottom","left"],offset:N=[0,8],onHide:d,onShow:g,placement:S="top",popperConfig:f,title:H,trigger:n="click",visible:u}=m,_=L(m,["children","animation","className","container","content","delay","fallbackPlacements","offset","onHide","onShow","placement","popperConfig","title","trigger","visible"]);const r=o.useRef(null),s=o.useRef(null),x=V(w,r),b=`popover${o.useId()}`,[c,v]=o.useState(!1),[a,h]=o.useState(u),{initPopper:F,destroyPopper:M}=$(),y=typeof i=="number"?{show:i,hide:i}:i,P={modifiers:[{name:"arrow",options:{element:".popover-arrow"}},{name:"flip",options:{fallbackPlacements:j}},{name:"offset",options:{offset:N}}],placement:D(S,s.current)},q=Object.assign(Object.assign({},P),typeof f=="function"?f(P):f);o.useEffect(()=>{if(u){l();return}p()},[u]),o.useEffect(()=>{if(c&&s.current&&r.current){F(s.current,r.current,q),setTimeout(()=>{h(!0)},y.show);return}!c&&s.current&&r.current&&M()},[c]),o.useEffect(()=>{!a&&s.current&&r.current&&G(()=>{v(!1)},r.current)},[a]);const l=()=>{v(!0),g&&g()},p=()=>{setTimeout(()=>{h(!1),d&&d()},y.hide)};return t.createElement(t.Fragment,null,t.cloneElement(E,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a&&{"aria-describedby":b}),{ref:s}),(n==="click"||n.includes("click"))&&{onClick:()=>a?p():l()}),(n==="focus"||n.includes("focus"))&&{onFocus:()=>l(),onBlur:()=>p()}),(n==="hover"||n.includes("hover"))&&{onMouseEnter:()=>l(),onMouseLeave:()=>p()})),t.createElement(z,{container:C,portal:!0},c&&t.createElement("div",Object.assign({className:A("popover","bs-popover-auto",{fade:R,show:a},T),id:b,ref:x,role:"tooltip"},_),t.createElement("div",{className:"popover-arrow"}),t.createElement("div",{className:"popover-header"},H),t.createElement("div",{className:"popover-body"},k))))});O.propTypes={animation:e.bool,children:e.node,className:e.string,container:e.any,content:e.oneOfType([e.string,e.node]),delay:e.oneOfType([e.number,e.shape({show:e.number.isRequired,hide:e.number.isRequired})]),fallbackPlacements:I,offset:e.any,onHide:e.func,onShow:e.func,placement:e.oneOf(["auto","top","right","bottom","left"]),popperConfig:e.oneOfType([e.func,e.object]),title:e.oneOfType([e.string,e.node]),trigger:B,visible:e.bool};O.displayName="CPopover";export{O as C};
